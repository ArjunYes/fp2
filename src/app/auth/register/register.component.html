<!-- Modal toggle -->

<!-- Main modal -->

<section class="bg-gray-50 dark:bg-gray-900">
  <div
    class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0"
  >
    <a
      href="#"
      tabindex="11"
      class="flex items-center mb-6 text-2xl font-semibold text-gray-900 dark:text-white"
    >
      <img
        class="w-8 h-8 mr-2"
        src="https://flowbite.s3.amazonaws.com/blocks/marketing-ui/logo.svg"
        alt="logo"
      />
      Medipay
    </a>
    <div
      class="w-full bg-white rounded-lg shadow dark:border md:mt-0 md:max-w-[75vw] xl:max-w-[50vw] xl:p-0 dark:bg-gray-800 dark:border-gray-700"
    >
      <div class="p-6 space-y-4 md:space-y-6 sm:p-8">
        <h1
          #registerTitle
          [textContent]="titleText"
          tabindex="0"
          aria-label="Page Title"
          class="text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"
        >
          Create an account
        </h1>
        <div class="sr-only" aria-live="polite">
          <span>{{ registerTitle.textContent }} </span>
        </div>
        <form
          [formGroup]="registerForm"
          (ngSubmit)="onSubmit()"
          class="space-y-4 md:space-y-6"
        >
          <div class="md:flex">
            <div class="md:w-1/2 sm:mr-3">
              <div class="mb-3">
                <label
                  for="first-name"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >First Name</label
                >
                <input
                  #firstNameError
                  type="text"
                  formControlName="first-name"
                  id="first-name"
                  class="mb-1 bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  placeholder="John"
                  required=""
                  tabindex="1"
                  aria-live="assertive"
                  aria-describedby="first-name-error"
                />
                <div
                  *ngIf="
                    registerForm.get('first-name')?.invalid &&
                    registerForm.get('first-name')?.touched
                  "
                >
                  <p
                    id="first-name-error"
                    
                    aria-live="assertive"
                    class="block mb-2 text-sm font-medium text-red-600"
                  >
                    First Name is required.
                  </p>
                </div>
              </div>
              <div class="mb-3">
                <label
                  for="last-name"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Last Name</label
                >
                <input
                  #lastNameError
                  type="text"
                  formControlName="last-name"
                  id="last-name"
                  class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  placeholder="Doe"
                  required=""
                  tabindex="2"
                  aria-live="assertive"
                />
                <div
                  *ngIf="
                    registerForm.get('last-name')?.invalid &&
                    registerForm.get('last-name')?.touched
                  "
                >
                  <p
                    class="block mb-2 text-sm font-medium text-red-600"
                    
                    aria-live="assertive"
                  >
                    Last Name is required.
                  </p>
                </div>
              </div>
              <div class="mb-3">
                <label
                  for="email"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Your email</label
                >
                <input
                  #emailError
                  type="email"
                  formControlName="email"
                  id="email"
                  class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  placeholder="name@company.com"
                  required=""
                  tabindex="3"
                  aria-live="assertive"
                />
                <div *ngIf="registerForm.get('email')?.touched">
                  <p
                    class="block mb-2 text-sm font-medium text-red-600"
                    
                    aria-live="assertive"
                  >
                    <ng-container
                      *ngIf="registerForm.get('email')?.hasError('required')"
                      >Email is required.</ng-container
                    >
                    <ng-container
                      *ngIf="registerForm.get('email')?.hasError('pattern')"
                      >Enter a valid email address.</ng-container
                    >
                    <ng-container
                      *ngIf="registerForm.get('email')?.hasError('userExists')"
                      >Signup failure! User already exists.</ng-container
                    >
                  </p>
                </div>
              </div>
              <div class="mb-3">
                <label
                  for="password"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Password</label
                >
                <input
                  #passwordError
                  type="password"
                  formControlName="password"
                  id="password"
                  placeholder="••••••••"
                  class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  required=""
                  tabindex="4"
                  aria-live="assertive"
                />
                <div
                  *ngIf="
                    registerForm.get('password')?.invalid &&
                    registerForm.get('password')?.touched
                  "
                >
                  <p class="block mb-2 text-sm font-medium text-red-600" 
                  aria-live="assertive">
                    <ng-container
                      *ngIf="registerForm.get('password')?.hasError('required')"
                      >Password is required.</ng-container
                    >
                    <ng-container
                      *ngIf="
                        registerForm.get('password')?.hasError('minlength')
                      "
                      >Password should be at least 8 characters.</ng-container
                    >
                    <ng-container
                      *ngIf="registerForm.get('password')?.hasError('pattern')"
                      >Password must contain at least one uppercase letter, one
                      lowercase letter, one digit, and one special character
                      .</ng-container
                    >
                  </p>
                </div>
              </div>
              <div class="mb-3">
                <label
                  for="confirm-password"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Confirm password</label
                >
                <input
                  #confirmPasswordError
                  type="password"
                  formControlName="confirm-password"
                  id="confirm-password"
                  placeholder="••••••••"
                  class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  required=""
                  tabindex="5"
                  aria-live="assertive"
                />
                <div
                  *ngIf="
                    (registerForm.hasError(
                      'passwordMismatch',
                      'confirm-password'
                    ) &&
                      registerForm.get('confirm-password')?.touched) ||
                    (registerForm
                      .get('confirm-password')
                      ?.hasError('required') &&
                      registerForm.get('confirm-password')?.touched)
                  "
                >
                  <p class="block mb-2 text-sm font-medium text-red-600" 
                  aria-live="assertive">
                    <ng-container
                      *ngIf="
                        registerForm.hasError(
                          'passwordMismatch',
                          'confirm-password'
                        )
                      "
                      >Passwords do not match.</ng-container
                    >
                    <ng-container
                      *ngIf="
                        registerForm
                          .get('confirm-password')
                          ?.hasError('required')
                      "
                      >Confirm Password is required.</ng-container
                    >
                  </p>
                </div>
              </div>
            </div>
            <div class="md:w-1/2 md:ml-3">
              <div class="mb-3">
                <label
                  for="date-of-birth"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Date of Birth</label
                >
                <input
                  #dateOfBirth
                  type="date"
                  name="date-of-birth"
                  formControlName="date-of-birth"
                  id="date-of-birth"
                  class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  required
                  tabindex="6"
                  aria-live="assertive"
                />
                <div
                  *ngIf="
                    registerForm.get('date-of-birth')?.invalid &&
                    registerForm.get('date-of-birth')?.touched
                  "
                >
                  <p class="block mb-2 text-sm font-medium text-red-600" 
                  aria-live="assertive">
                    <ng-container
                      *ngIf="
                        registerForm.get('date-of-birth')?.hasError('required')
                      "
                      >Date of Birth is required.</ng-container
                    >
                    <ng-container
                      *ngIf="
                        registerForm
                          .get('date-of-birth')
                          ?.hasError('invalidDate')
                      "
                      >Enter a valid date of birth.</ng-container
                    >
                  </p>
                </div>
              </div>
              <div class="mb-3">
                <label
                  for="address"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Address</label
                >
                <textarea
                  formControlName="address"
                  id="address"
                  placeholder="Your Street, Your City, Your Country"
                  aria-placeholder="Your Street, Your City, Your Country"
                  rows="5"
                  class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  required=""
                  tabindex="7"
                  aria-label="Address (Enter your complete address including your street, your city, your country)"
                  aria-live="assertive"
                ></textarea>
                <div
                  *ngIf="
                    registerForm.get('address')?.invalid &&
                    registerForm.get('address')?.touched
                  "
                >
                  <p class="block mb-2 text-sm font-medium text-red-600" 
                  aria-live="assertive">
                    Address is required.
                  </p>
                </div>
              </div>
              <div class="mb-3">
                <label
                  for="phone-number"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Phone Number</label
                >
                <input
                  #phoneNumberError
                  type="tel"
                  formControlName="phone-number"
                  id="phone-number"
                  placeholder="(123)-456-7890"
                  class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                  required=""
                  tabindex="8"
                  aria-live="assertive"
                />
                <div
                  *ngIf="
                    registerForm.get('phone-number')?.invalid &&
                    registerForm.get('phone-number')?.touched
                  "
                >
                  <p class="block mb-2 text-sm font-medium text-red-600" 
                  aria-live="assertive">
                    <ng-container
                      *ngIf="
                        registerForm.get('phone-number')?.hasError('required')
                      "
                      >Phone Number is required.</ng-container
                    >
                    <ng-container
                      *ngIf="
                        registerForm.get('phone-number')?.hasError('pattern')
                      "
                      >Invalid phone number format.</ng-container
                    >
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="md:w-1/2 md:pr-3">
            <div class="mb-3 flex items-start">
              <div class="flex items-center h-5">
                <input
                  id="terms"
                  formControlName="terms"
                  aria-describedby="terms"
                  type="checkbox"
                  class="w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-primary-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-primary-600 dark:ring-offset-gray-800"
                  required=""
                  tabindex="9"
                />
              </div>
              <div class="ml-3 text-sm">
                <label
                  (click)="showTandC = true"
                  for="terms"
                  class="font-light text-gray-500 dark:text-gray-300"
                  >I accept the
                  <a
                    class="font-medium text-primary-600 cursor-pointer hover:underline dark:text-primary-500"
                    >Terms and Conditions</a
                  ></label
                >
                <div
                  *ngIf="
                    registerForm.get('terms')?.invalid &&
                    registerForm.get('terms')?.touched
                  "
                >
                  <p class="block mb-2 text-sm font-medium text-red-600" 
                    aria-live="assertive">
                    You must accept the Terms and Conditions to proceed.
                  </p>
                </div>
              </div>
            </div>
            <button
              type="submit"
              tabindex="10"
              class="w-full mb-3 text-white bg-purple-800 hover:bg-purple-900 focus:ring-4 focus:outline-none focus:ring-purple-300 font-medium rounded-lg text-sm px-6 py-4 rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800"
            >
              Sign Up
            </button>
            <!-- <button type="submit" class="w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">Create an account</button> -->
            <p class="text-sm font-light text-gray-500 dark:text-gray-400">
              Already have an account?
              <a
                (click)="login()"
                class="font-medium text-primary-600 cursor-pointer hover:underline dark:text-primary-500"
                tabindex="0"
                >Login here</a
              >
            </p>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<app-termsandconditions
  *ngIf="showTandC"
  (selectedValue)="checkValue($event)"
></app-termsandconditions>
